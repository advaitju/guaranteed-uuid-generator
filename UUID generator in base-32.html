<!DOCTYPE html>
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>UUID generator in base-32</title>

		<!-- 3rd party -->
		<!-- CSS -->
			<!-- Bootstrap -->
			<link href="lib/bootstrap.min.css" rel="stylesheet">
		<!-- Js -->

		<!-- Dev -->
		<!-- CSS -->
		<link href="lib/style.css" rel="stylesheet">
		<!-- Js -->
	</head>
	<body class="vsc-initialized">
		<div class="container">
			<div class="row">
				<div class="col-sm-12">
					<h1>UUID generator in base-32</h1>
					<p>UUID is generated by getting current time in Sydney, Australia and converting to a base-32 number.</p>
					<p>Fork project if intended for heavy use and register/replace API key for Time Zone DB.</p>
					<hr>
					<h4>Click to Copy</h4>
					<div class="panel panel-default">
						<div id="uuid" class="panel-body copy-button">Loading...</div>
						<div id="copied" class="panel-footer hide">Copied</div>
					</div>
					<button id="generate-id" type="button" class="btn btn-default" aria-label="Left Align">
						Generate ID
					</button>
				</div>
			</div>
		</div>

		<!-- Js -->
		<!-- 3rd party -->
			<!-- jQuery -->
			<script src="lib/jquery.min.js"></script>
			<!-- Clipboard.js -->
			<script src="lib/clipboard.min.js"></script>
		<!-- Dev -->
	<script>
		// Decimal to base-36 converter
		// Comporess UUID
		function base_converter(r){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=[];r>0;){var o=r%36;if(o<0||o>=e.length)return console.log("Out of bounds error"),null;n.push(e[o]),r=parseInt(r/36)}return n.reverse().toString().toLowerCase().replace(/,/g,"")}

		$( document ).ready( function() {
			var clipboard = new Clipboard('.copy-button', {
				target: function(trigger) {
					return trigger;
				}
			});
			clipboard.on('success', function(e) {
				var target = e.trigger;
				$("#copied").removeClass("hide");
				e.clearSelection();
			});

			$.get("http://api.timezonedb.com/v2/get-time-zone?key=XW3U61PTYFQM&format=json&by=zone&zone=Australia/Sydney", function(data) {
				document.getElementById("uuid").innerHTML = base_converter(data.timestamp);
			});

			$('#generate-id').click(function() {
				$.get("http://api.timezonedb.com/v2/get-time-zone?key=XW3U61PTYFQM&format=json&by=zone&zone=Australia/Sydney", function(data) {
					document.getElementById("uuid").innerHTML = base_converter(data.timestamp);
				});
			});
		});
	</script>

</body></html>
